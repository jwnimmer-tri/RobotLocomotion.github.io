<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Drake: Contact Modeling in Drake</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Drake
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__drake__contacts.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">Contact Modeling in Drake<div class="ingroups"><a class="el" href="group__multibody.html">Multibody Kinematics and Dynamics</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Drake is concerned with the simulation of <em>physical</em> phenomena, including contact between simulated objects. </p>
<p>Drake approximates real-world physical contact phenomena with a combination of geometric techniques and response models. Here we discuss the parameterization and idiosyncrasies of a particular contact response model, based on point contact, non-penetration imposed with a penalty force, and a continuous model of friction approximating Coulomb stiction and sliding friction effects. This document gives an overview of the state of the implementation of contact in Drake (as of Q2 2019) with particular emphasis on how to account for its particular quirks in a well-principled manner. What works in one simulation scenario, may not work equally well in another scenario. This discussion will encompass:</p><ul>
<li><a class="el" href="group__contact__geometry.html">properties of the geometric contact techniques</a>,</li>
<li><a class="el" href="group__contact__engineering.html#contact_parameters">choosing appropriate modeling parameters</a>,</li>
<li><a class="el" href="group__contact__engineering.html#time_advancement_strategy">choosing a time advancement strategy</a>, and</li>
<li><a class="el" href="group__stribeck__approximation.html">details of the friction model</a>.</li>
</ul>
<h2>Mechanics of Solids</h2>
<p>All objects in real life are compliant and deform under the action of external loads. Deformations, as well as motion, of real life solids are well described by the theory of <em>continuum mechanics</em>, which provides a complete description of the full three-dimensional state of stress and deformation given a set of external loads and boundary conditions. Broadly, how compliant a solid is depends on the material (or materials) it is made of. Factors such as microstructure, imperfections, anisotropy, etc. affect the behavior of a material. Ultimately, in continuum mechanics, the behavior of a particular material can be boiled down to its stress-strain curve, or constitutive law describing the stress/strain relationship at each point within a solid composed of that material. The simplest constitutive law is that of Hooke's law, describing the behaviour of materials which exhibit a linear-elastic region in the stress-strain curve. Materials such as steel and aluminum can be modeled as Hookean, as long as strain is within the elastic range (&lt; 1% strain for steel for example). Other materials such as rubber are hyperelastic and are best described by a Neo-Hookean law. The <em>stiffness</em> of a material essentially refers to how steep this stress-strain curve is. The steeper the slope of the stress-strain curve, the stiffer a material is. For Hookean materials, this translates to a larger Young's modulus (the slope of the stress-strain curve in the linear regime).</p>
<h2>Contact Mechanics</h2>
<p>Contact mechanics refers to the study of the deformations that solids undergo as the result of contact loads. The study of contact mechanics dates back to the pioneering work of Heinrich Hertz in 1882. The Hertzian theory of contact describes the loads and deformations when strains are small, the contacting surfaces are much smaller than the overall dimensions of the contacting bodies and the materials are linear (i.e. are described by the Hookean law).</p>
<p>In general, when two solids come into contact, they inevitably must undergo deformation in order to avoid the physical impossibility of interpenetration. This constraint is described by the Signorini boundary condition, which at each point in the contact surface imposes a complementarity constraint between normal stress and penetration (described by a gap function). Stresses on the contact surface are the result of these deformations.</p>
<p>Ultimately, contact forces are the result of integrating these contact stresses on the contact surface between the solids.</p>
<h2>Rigid Approximation to Contact</h2>
<p>A rigid body is an <em>approximation</em> to the general mechanics of solids in the mathematical limit to infinite stiffness. This mathematical approximation has been used extensively in the past for the simulation of multibody systems with contact. As an approximation to the real physical system, it leads to known problems such as indeterminate systems. Consider for instance a rigid beam supported by its two end points and by a third point of support right in the middle, through its center of gravity. Under the action of its own weight, infinite solutions to the static problem exist.</p>
<p>Rigid contact with Coulomb friction is a common approximation used in simulation as well. It has its own limitations, most notable the possible non-existence of a solution. An example of this is the well known Painlevé paradox, a one degree of freedom system with contact that, depending on the state, has an infinite number of solutions or even no solution.</p>
<p>It should be noted that these artifacts are a consequence of the mathematical approximations adopted and not a flaw of the original continuum mechanics theory and even much less, a flaw in the physics itself.</p>
<h3>Point Contact</h3>
<p>In the limit to rigid contact, often the region of contact, or contact surface, shrinks to a single point. Notable exceptions are planar boundaries coming into contact (box on a plane for instance) and rigid bodies with conforming boundaries. Even in those cases it is common to model the surface contact by selecting a few points on the surface and generating contact forces only at those points.</p>
<p><a class="anchor" id="point_contact_approximation"></a></p><h3>Numerical Approximation of Point Contact</h3>
<p>Contact determination in the limit to rigid is not feasible with floating point arithmetic given that rigid bodies either lie exactly on top of each other or are not in contact. In order for a practical implementation to detect contact the bodies must be in an overlapping configuration, even if by a negligible small amount, see Figure 1.</p>
<p>In a point contact model two bodies A and B are considered to be in contact if the geometrical intersection of their original rigid geometries is non-empty. That is, there exists a non-empty overlap volume. In a point contact model, this overlap region is simply characterized by a pair of witness points <code>Aw</code> and <code>Bw</code> on bodies A and B, respectively, such that <code>Aw</code> is a point on the surface of A that lies the farthest from the surface of B. Similarly for point <code>Bw</code>. In the limit to rigid, bodies do not interpenetrate, the intersection volume shrinks to zero and in this limit witness points <code>Aw</code> and <code>Bw</code> coincide with each other.</p>
<h3>Enforcing Non-Penetration with Penalty Forces</h3>
<p>In Drake we enforce the non-penetration constraint for rigid contact using a penalty force. This penalty force introduces a "numerical" compliance such that, within this approximation, rigid bodies are allowed to overlap with a non-empty intersection. The strength of the penalty can be adjusted so that, in the limit to a very stiff penalty force we recover rigid contact. In this limit, for which <code>Aw ≡ Bw</code>, a contact point <code>Co</code> is defined as <code>Co ≜ Aw (≡ Bw)</code>. In practice, with a finite numerical stiffness of the penalty force, we define <code>Co = 1/2⋅(Aw + Bw)</code>. Notice that the 1/2 factor is arbitrary and it's chosen for symmetry. We define the normal <code>n̂</code> as pointing outward from the surface of <code>B</code> towards the interior of <code>A</code>. That is, if we denote with <code>d</code> the (positive) penetration depth, we have that <code>Bw = d⋅n̂ + Aw</code>. We define a contact frame C with origin at <code>Co</code>. The C frame's z-axis is aligned along the normal n̂ (with arbitrary x- and y-axes). Because the two forces are equal and opposite, we limit our discussion to the force <code>f</code> acting on <code>A</code> at <code>Co</code> (such that <code>-f</code> acts on <code>B</code> at <code>Co</code>).</p>
<div class="image">
<img src="simple_contact.png" alt="simple_contact.png"/>
<div class="caption">
Figure 1: Illustration of contact between two spheres.</div></div>
<p> The computation of the contact force is most naturally discussed in the contact frame <code>C</code> (shown in Figure 1). The contact force, <code>f</code>, can be decomposed into two components: normal, <code>fₙ</code>, and tangential, <code>fₜ</code> such that <code>f=fₙ+fₜ</code>. The normal force lies in the direction of the contact frame's z-axis. The tangential component lies parallel to the contact frame's x-y plane. In Drake's contact model, the tangential force is a function of the normal force. The detailed discussion of the contact force computation is decomposed into two parts: a high-level engineering discussion addressed to end users who care most about working with the model and a further detailed discussion of the mathematical underpinnings of the implemented model. The practical guide should be sufficient for most users.</p>
<p>Next topic: <a class="el" href="group__contact__geometry.html">Detecting Contact</a> </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__contact__geometry"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__contact__geometry.html">Detecting Contact</a></td></tr>
<tr class="memdesc:group__contact__geometry"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given two posed geometric shapes in a common frame, the collision detection system is responsible for determining if those shapes are penetrating and characterizing that penetration. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__contact__engineering"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__contact__engineering.html">Working with Contacts in Drake</a></td></tr>
<tr class="memdesc:group__contact__engineering"><td class="mdescLeft">&#160;</td><td class="mdescRight">The behavior of a simulation with contact will depend on three factors: <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__stribeck__approximation"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stribeck__approximation.html">Continuous Approximation of Coulomb</a></td></tr>
<tr class="memdesc:group__stribeck__approximation"><td class="mdescLeft">&#160;</td><td class="mdescRight">FrictionStatic friction (or stiction) arises due to surface characteristics at the microscopic level (e.g., mechanical interference of surface imperfections, electrostatic, and/or Van der Waals forces). <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15 -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.nl/">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a></li>
  </ul>
</div>
</body>
</html>
